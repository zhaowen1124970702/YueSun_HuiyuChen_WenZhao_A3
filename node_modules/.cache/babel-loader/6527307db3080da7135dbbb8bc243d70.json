{"ast":null,"code":"var _jsxFileName = \"/Users/huiyuchen/YueSun_HuiyuChen_WenZhao_A3/src/Component/Comment.js\";\nimport './App.css';\nimport React from 'react';\nimport Axios from 'axios';\nimport './Comment.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Comment extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loginUser: this.props.loginUser,\n      content: this.props.comment.content,\n      comment: this.props.comment,\n      editing: false,\n      message: ''\n    };\n  }\n\n  submitEdit() {\n    if (!this.state.content) {\n      return this.setState({\n        message: \"Comment cant be empty!\"\n      });\n    }\n\n    const newComment = this.state.comment;\n    newComment.content = this.state.content;\n    Axios.put('/api/comment', newComment).then(response => {\n      window.location.href = \"post?id=\" + this.state.comment.postID;\n    }).catch(error => {\n      this.setState({\n        message: \"Fail to edit comment\"\n      });\n    });\n  }\n\n  submitDelete() {\n    Axios.delete('/api/comment/single/' + this.state.comment._id).then(response => {\n      window.location.href = \"/post?id=\" + this.state.comment.postID;\n    }).catch(error => {\n      this.setState({\n        message: \"Fail to delete comment\"\n      });\n    });\n  }\n\n  changeToEditingMode() {\n    this.setState({\n      editing: true\n    });\n  }\n\n  showEditandDelete() {\n    if (this.state.loginUser === this.state.comment.editorUsername) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"editDeleyeDetail\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"editStyle\",\n          onClick: () => this.changeToEditingMode(),\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"deleteStyle\",\n          onClick: () => this.submitDelete(),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n  showContent() {\n    if (!this.state.editing) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: this.state.comment.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"editingNow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"inputStyle\",\n          type: \"text\",\n          value: this.state.content,\n          onChange: e => this.setState({\n            content: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"createButton\",\n          onClick: () => this.submitEdit(),\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n  displayErrorMessage() {\n    if (this.state.message) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messageStyle\",\n        children: this.state.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"commentBlock\",\n        children: [this.showContent(), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"commentDetail\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: this.state.comment.editorUsername\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"timeStyle\",\n            children: [\" \", this.state.comment.postTime.slice(0, 10) + \" \" + this.state.comment.postTime.slice(11, 19)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 25\n          }, this), this.showEditandDelete()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), this.displayErrorMessage()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/huiyuchen/YueSun_HuiyuChen_WenZhao_A3/src/Component/Comment.js"],"names":["React","Axios","Comment","Component","constructor","props","state","loginUser","content","comment","editing","message","submitEdit","setState","newComment","put","then","response","window","location","href","postID","catch","error","submitDelete","delete","_id","changeToEditingMode","showEditandDelete","editorUsername","showContent","e","target","value","displayErrorMessage","render","postTime","slice"],"mappings":"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","sourcesContent":["import './App.css';\nimport React from 'react';\nimport Axios from 'axios';\nimport './Comment.css';\n\nexport default class Comment extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            loginUser: this.props.loginUser,\n            content: this.props.comment.content,\n            comment:this.props.comment,\n            editing: false,\n            message:''\n        }\n    }\n\n    submitEdit(){\n        if(!this.state.content){\n            return this.setState({\n                message: \"Comment cant be empty!\"\n            })    \n        }\n        const newComment = this.state.comment\n        newComment.content = this.state.content\n        Axios.put('/api/comment', newComment)\n            .then((response) => {\n                window.location.href = \"post?id=\" + this.state.comment.postID;\n            })\n            .catch((error) => {\n                this.setState( {\n                    message: \"Fail to edit comment\"\n                })\n            })\n    \n\n    }\n\n    submitDelete(){\n        Axios.delete('/api/comment/single/' + this.state.comment._id)\n            .then((response) => {\n                window.location.href =\"/post?id=\" + this.state.comment.postID;\n            })\n            .catch((error) => {\n                this.setState( {\n                    message: \"Fail to delete comment\"\n                })\n            })\n    }\n\n    changeToEditingMode(){\n        this.setState( {\n            editing:true\n        })\n\n    }\n\n    showEditandDelete(){\n        if(this.state.loginUser === this.state.comment.editorUsername){\n            return(\n                <div className=\"editDeleyeDetail\">\n                    <div className=\"editStyle\" onClick={() => this.changeToEditingMode()}>\n                        Edit  \n                    </div>\n                    <div className=\"deleteStyle\" onClick={() => this.submitDelete()}>\n                        Delete\n                    </div>\n                </div>\n            \n            )\n        }\n    }\n\n\n    showContent(){\n        if(!this.state.editing){\n            return(\n                <div>\n                    {this.state.comment.content}\n                </div>\n            )\n        }else{\n            return(\n                <div>\n                    <h2>editingNow</h2>\n                    <textarea className=\"inputStyle\" type=\"text\" value={this.state.content} onChange={e => this.setState({content: e.target.value})}></textarea>\n                    <div className=\"createButton\" onClick={() => this.submitEdit()}>Submit</div>\n\n                </div>\n            )\n        }\n    }\n\n    displayErrorMessage(){\n        if(this.state.message){\n            return (\n                <div className=\"messageStyle\">{this.state.message}</div>\n            )\n            \n        }  \n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"commentBlock\">\n                    {this.showContent()}\n                    <div className=\"commentDetail\">\n                        <div>{this.state.comment.editorUsername}</div>\n                        <div className=\"timeStyle\"> {this.state.comment.postTime.slice(0,10) + \" \" + this.state.comment.postTime.slice(11,19)}</div>\n                        {this.showEditandDelete()}\n                    </div>\n                </div>\n                {this.displayErrorMessage()} \n\n            </div>\n\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}